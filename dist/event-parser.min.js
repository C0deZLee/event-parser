!function(){function e(t){var s={sourceText:null,weekStart:"sunday",onDateParsed:function(){},onTimeParsed:function(){}};return this.settings=this.helpers.extend({},s,t),window===this?new e(t):(this.eventTemplate={sourceText:"",parsedText:"",parsedTitle:"",parsedDates:[],parsedTimes:[],parsedNames:[],parsedLocations:[],parsedRecurrencies:[],title:"",startDate:null,endDate:null,until:null,separation:1,frequency:"once",count:0,recurrentAttr:[],isRecurrent:!1,isValidDate:!1,allDay:!0},this.sets={weekday:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],month:["january","february","march","april","may","june","july","august","september","october","november","december"],number:{prefix:["twenty","thirty"],ordinal:["first","second","third","fourth","fifth","sixth","seventh","eighth","nineth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth"],normal:["one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"]},range:{splitter:["to","(?:-+)?-","(?:un)?till?","through","thru","and","ends"],prefix:["between","from","start(?:ing)?","on","at"]},timeRelatives:["afternoon","night","evening","morning"]},this.patterns={recurrenceExpression:/((?:at|on)\s)?(((every|each)\s)?((((sunday|monday|tuesday|wednesday|thursday|friday|saturday)(?:s)?(?:\s)?(?:,|and|&)?\s?){2,})|((january|february|march|april|may|june|july|august|september|october|november|december)(?:\s)?(?:,|and|&)?\s?){2,}))|((every|each)\s(((?:((?:(twenty|thirty(?:-|\s))?(first|second|third|fourth|fifth|sixth|seventh|eighth|nineth|tenth|eleventh|twelfth|thirteenth|fourteenth|fifteenth|sixteenth|seventeenth|eighteenth|nineteenth))|(?:tenth|twentieth|thirtieth))|(\d+)(?:st|nd|rd|th))|next|last|other)?\s)?((sunday|monday|tuesday|wednesday|thursday|friday|saturday)(?:s)?|(january|february|march|april|may|june|july|august|september|october|november|december)|(weekday|weekend|week|month|day|year)))|(dai|week|month|year)ly|weekends|weekdays/gi,recurrenceExcepts:/(?:except)(.+?)(?=on|at|with|from|to|(un)?till?)/gi,numbers:{numerical:/\b(?:(\d+)(st|nd|rd|th)\b)/gi,ordinal:new RegExp("(?:("+this.sets.number.prefix.join("|")+"(?:-|\\s))?("+this.sets.number.ordinal.join("|")+"))|(?:tenth|twentieth|thirtieth)","gi"),normal:new RegExp("((?:(?:(?:"+this.sets.number.prefix.join("|")+")(?:-|\\s))?("+this.sets.number.normal.join("|")+"))|(?:ten|"+this.sets.number.prefix.join("|")+"))","gi")},dates:{formatted:/(?:(?:on|at)\s)?\b[^\/\d+](\d{1,2})\/(\d{1,2})(?:\/(\d{4}|\d{2}))?(?!\/)\b/gi,mdyStrings:/(?:(?:on|at)\s)?(?:(january|february|march|april|may|june|july|august|september|october|november|december)(?:(?:(?:\s?,)?\s?of)?\s?(\d{1,2}(?:\s)?(?:th|st|nd|rd)?)(?!(:|(?:\s+)?am|(?:\s+)?pm))\b)(?:(?:\s?,)?(?:\s?of\s?)?(?:\s)?(20\d{2}|\d{2}[6-9]\d+))?)/gi,dmyStrings:/(?:(?:on|at)\s)?(?:(\d{1,2}(?:\s)?(?:|th|st|nd|rd)?)\b(?:\sof\s)?\s?(january|february|march|april|may|june|july|august|september|october|november|december)(?:(?:\s?,)?(?:\s?of\s?)?(20\d{2}|\d{2}[6-9]\d+))?)/gi,relative:{common:/(?:(?:on|at|to)\s)?(?:(next|this|last|after|other|\d(?:st|nd|rd|th)?)\s)?(today|tomorrow|month|week|year|sunday|monday|tuesday|wednesday|thursday|friday|saturday)/gi,dayAfter:/(\bday\safter\stomorrow\b)/gi,"in":/(?:in\b\s(?:a\s)?(couple|(?:\d+)|(?:\b(?:twenty|thirty(?:-|\s))?\b(?:one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen))|(?:twenty|thirty))?(?:\s)?(?:of\s)?(day|week|month|year)(?:s)?)/gi},ranges:{formatted:new RegExp("(?:"+this.sets.range.prefix.join("|")+")?(?:\\s)?(\\d{1,2}\\/\\d{1,2}(?:\\/\\d{2,4})?)(?:(?:\\s)?("+this.sets.range.splitter.join("|")+")(?:\\s)?)(\\d{1,2}\\/\\d{1,2}(?:\\/\\d{2,4})?)","gi"),from:new RegExp("(?:"+this.sets.range.prefix.join("|")+")?(?:\\s)?[^/\\d+](\\d{1,2})(?:(?:\\s)?("+this.sets.range.splitter.join("|")+")(?:\\s)?)(\\d{1,2}\\/\\d{1,2}(?:\\/\\d{2,4})?)","gi"),to:new RegExp("(?:"+this.sets.range.prefix.join("|")+")?(?:\\s)?(\\d{1,2}\\/\\d{1,2}(?:\\/\\d{2,4})?)(?:(?:\\s)?("+this.sets.range.splitter.join("|")+")(?:\\s)?)(\\d{1,2}(?!\\/))","gi"),between:/\s/gi}},times:{formatted:/((?:(?:at|on)\s)?(?:\d{1,2})(?::)(?:\d{2}))/gi,singleInstances:/(?:(?:at|on)?(\d{1,2})(?:(?::)(\d{2}))(?:(?:\s)?(am|pm))?|(\d{1,2})(?:\s)?(am|pm))/gi,fullRanges:new RegExp("((?:"+this.sets.range.prefix.join("|")+"\\s)?(?:\\d{1,2})(?::)(\\d{2}))\\s?(?:"+this.sets.range.splitter.join("|")+")\\s?((\\d{1,2})(?::)(\\d{2}))","gi"),partialX2Time:new RegExp("((?:"+this.sets.range.prefix.join("|")+"\\s)?(?:\\d{1,2})(?::)(\\d{2}))\\s?(?:"+this.sets.range.splitter.join("|")+")\\s?((\\d{1,2})(?:\\:)(\\d{2}))","gi"),partialTime2X:new RegExp("((?:"+this.sets.range.prefix.join("|")+"\\s)?(?:\\d{1,2})(?::)(\\d{2}))\\s?(?:"+this.sets.range.splitter.join("|")+")\\s?((\\d{1,2})(?:\\:)(\\d{2}))","gi")},nicers:[[/(\d{4})(?:-|.)(\d{2})(?:-|.)(\d{2})/gi,"$2/$3/$1"],[/(w(\.|\/))/i,"with"],[/[^0-9a-z]\s?(@)\s?/i," at "],[/(\btom(?:orrow)?\b)/i,"tomorrow"],[/(?:\b)(noon)(?:\b)/i,"12:00"],[/\b(midnight)\b/i,"24:00"],[/(\bmon(?:day)?\b)/i,"monday"],[/(\btue(?:s(?:day)?)?\b)/i,"tuesday"],[/(\bwed(?:nes(?:day)?)?\b)/i,"wednesday"],[/(\bthu(?:rs(?:day)?)?\b)/i,"thursday"],[/(\bfri(?:day)?\b)/i,"friday"],[/(\bsat(?:ur(?:day)?)?\b)/i,"saturday"],[/(\bsun(?:day)?\b)/i,"sunday"],[/(\bjan(?:uary)?\b)/i,"january"],[/(\bfeb(?:ruary)?\b)/i,"february"],[/(\bmar(?:ch)?\b)/i,"march"],[/(\bapr(?:il)?\b)/i,"april"],[/(\bmay\b)/i,"may"],[/(\bjun(?:e)?\b)/i,"june"],[/(\bjul(?:y)?\b)/i,"july"],[/(\baug(?:ust)?\b)/i,"august"],[/(\bsep(?:t(?:ember)?)?\b)/i,"september"],[/(\boct(?:ober)?\b)/i,"october"],[/(\bnov(?:ember)?\b)/i,"november"],[/(\bdec(?:ember)?\b)/i,"december"]],holidays:[[/(\bthanksgiving\b)/gi,"every 4th thuesday of november"],[/\b(christmas|xmas|x-mas)\b/gi,"12/25"],[/(\bnew\s?year(:?'s)?(\seve)\b)/gi,"12/31 at 23:00"],[/(\bnew\s?year(:?'s)\b)/gi,"1/1"],[/(\bapril\sfools\b)/gi,"4/1"],[/(\bhalloween\b)/gi,"10/30"]]},this.now=void 0,this instanceof e?this:new e(this.settings))}e.prototype={getNow:function(){return this.now?new Date(this.now.getTime()):new Date},cleanup:function(e){var t,s,a,r;for(r=0;r<this.patterns.nicers.length;r++)e=e.replace(this.patterns.nicers[r][0],this.patterns.nicers[r][1]);for(r=0;r<this.patterns.holidays.length;r++)e=e.replace(this.patterns.holidays[r][0],this.patterns.holidays[r][1]);for(this.patterns.numbers.numerical.lastIndex=0;a=this.patterns.numbers.numerical.exec(e);)s=a.filter(this.helpers.isUndefined),this.patterns.numbers.numerical.lastIndex=a.index+1,e=e.replace(s[0],this.helpers.getOrdinal(s[1]));for(this.patterns.numbers.normal.lastIndex=0;a=this.patterns.numbers.normal.exec(e);)s=a.filter(this.helpers.isUndefined),this.patterns.numbers.normal.lastIndex=a.index+1;for(this.patterns.numbers.ordinal.lastIndex=0;a=this.patterns.numbers.ordinal.exec(e);){if(s=a.filter(this.helpers.isUndefined),this.patterns.numbers.ordinal.lastIndex=a.index+1,t="",2==s.length)if(s[1].match(/tenth|twentieth|thirtieth/i))switch(s[1]){case"tenth":t="10th";break;case"twentieth":t="20th";break;case"thirtieth":t="30th"}else t=this.helpers.getOrdinal(this.sets.number.ordinal.indexOf(s[1].toLowerCase())+1);else 3==s.length&&(t=this.sets.number.prefix.indexOf(s[1].toLowerCase())+2+this.helpers.getOrdinal(this.sets.number.ordinal.indexOf(s[2].toLowerCase())+1));""!=t&&(e=e.replace(s[0],t))}return e},parseRecurrent:function(e){var t,s;for(e.isRecurrent=!1,e.recurrenceText="";s=this.patterns.recurrenceExpression.exec(e.parsedText);)t=s.filter(this.helpers.isUndefined),this.patterns.recurrenceExpression.lastIndex=s.index+1,e.isRecurrent=!0,e.parsedText=e.parsedText.replace(t[0],""),e.parsedRecurrencies.push({index:s.index,match:t[0]});if(e.isRecurrent)for(;t=this.patterns.recurrenceExcepts.exec(e.parsedText);)e.recurrenceExceptionsText=t[0],e.parsedText=e.parsedText.replace(e.recurrenceExceptionsText,"");else;return e},parseRelPrefix:function(e){var t,s,a=!1,r=!1,n=!1,i=!1;if(e.length>=3){switch(e[1]){case"last":a=!0;break;case"next":r=!0;break;case"this":n=!0;break;default:(s=e[1].match(this.patterns.numbers.numerical))&&(t=2,i=parseInt(s[0]))}t=2}else t=1;return{last:a,next:r,self:n,number:i,subjectIndex:t}},parseRelSuffix:function(e){},parseDates:function(e){var t,s,a,r,n,i;for(this.patterns.dates.formatted.lastIndex=0;s=this.patterns.dates.formatted.exec(e.parsedText);)t=s.filter(this.helpers.isUndefined),r=parseInt(t[1])<=31&&parseInt(t[1])>=1?parseInt(t[1]):null,n=parseInt(t[0])<=12&&parseInt(t[0])>=1?parseInt(t[0]):null,i=4==t.length?parseInt(t[3]):null,r&&n&&this.helpers.isValidDate(t[0])&&(e.hasValidDate=!0,a=t[0],e.parsedDates.push({index:s.index,match:a,formattedDate:a,hasYear:this.helpers.isNumeric(i),date:{month:n,date:r,year:i}}),this.settings.onDateParsed&&"function"==typeof this.settings.onDateParsed&&this.settings.onDateParsed());for(this.patterns.dates.mdyStrings.lastIndex=0;s=this.patterns.dates.mdyStrings.exec(e.parsedText);)t=s.filter(this.helpers.isUndefined),r=parseInt(t[2])<=31&&parseInt(t[2])>=1?parseInt(t[2]):null,n=this.sets.month.indexOf(t[1])>=0?this.sets.month.indexOf(t[1])+1:null,i=4==t.length?parseInt(t[3]):null,a=n+"/"+r+(i?"/"+i:""),this.patterns.dates.mdyStrings.lastIndex=s.index+1,r&&n&&this.helpers.isValidDate(a)&&(e.hasValidDate=!0,e.parsedText=e.parsedText.replace(t[0],a),e.parsedDates.push({index:s.index,match:t[0],formattedDate:a,hasYear:this.helpers.isNumeric(i),date:{month:n,date:r,year:i}}),this.settings.onDateParsed&&"function"==typeof this.settings.onDateParsed&&this.settings.onDateParsed());for(this.patterns.dates.dmyStrings.lastIndex=0;s=this.patterns.dates.dmyStrings.exec(e.parsedText);)e.isValidDate=!0,t=s.filter(this.helpers.isUndefined),this.patterns.dates.dmyStrings.lastIndex=s.index+1,r=parseInt(t[1])<=31&&parseInt(t[1])>=1?parseInt(t[1]):null,n=this.sets.month.indexOf(t[2])>=0?this.sets.month.indexOf(t[2])+1:null,i=4==t.length?parseInt(t[3]):null,a=n+"/"+r+(i?"/"+i:""),r&&n&&this.helpers.isValidDate(a)&&(e.hasValidDate=!0,e.parsedText=e.parsedText.replace(t[0],a),e.parsedDates.push({index:s.index,match:t[0],formattedDate:a,hasYear:this.helpers.isNumeric(i),date:{month:n,date:r,year:i}}),this.settings.onDateParsed&&"function"==typeof this.settings.onDateParsed&&this.settings.onDateParsed());return e.parsedDates.sort(function(e,t){return e.dt<t.dt?-1:e.dt>t.dt?1:0}),e},parseTimes:function(e){for(var t,s,a,r,n,i;n=this.patterns.times.singleInstances.exec(e.parsedText);)if(e.isValidDate=!0,r=n.filter(this.helpers.isUndefined),r.length>=3){if("am"===r[r.length-1].toLowerCase()||"pm"===r[r.length-1].toLowerCase()){if(parseInt(r[1])>12||parseInt(r[1])<0||3==r.length&&(parseInt(r[2])>59||parseInt(r[2])<0))continue;a=r[r.length-1].toLowerCase(),t="am"==a&&12==parseInt(r[1])?0:"pm"==a&&parseInt(r[1])<12?parseInt(r[1])+12:parseInt(r[1]),s=3==r.length?0:parseInt(r[2])}else{if(parseInt(r[1])>23||parseInt(r[1])<0||parseInt(r[2])>59||parseInt(r[2])<0)continue;a=void 0,t=parseInt(r[1]),s=parseInt(r[2])}i=this.helpers.padNumberWithZeroes(t,2)+":"+this.helpers.padNumberWithZeroes(s,2),e.parsedText=e.parsedText.replace(r[0],i),e.parsedTimes.push({index:n.index,hasMeridian:a||!1,match:r[0],formattedTime:i,time:{hours:t,minutes:s}}),this.settings.onTimeParsed&&"function"==typeof this.settings.onTimeParsed&&this.settings.onTimeParsed()}return e},parseRelativeDates:function(e){var t,s,a,r,n,i=this.getNow();for((t=e.parsedText.match(this.patterns.dates.relative.dayAfter))&&(a=new Date(i.getFullYear(),i.getMonth(),i.getDate()+2),r=a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear(),e.parsedText=e.parsedText.replace(t[0],r),e.parsedDates.push({index:e.preConvertedString.indexOf(t[0]),match:t[0],formattedDate:r,date:{month:a.getMonth()+1,date:a.getDate(),year:a.getFullYear()}}));t=this.patterns.dates.relative["in"].exec(e.parsedText);)s=t.filter(this.helpers.isUndefined),2==s.length?a=this.helpers.getDateShifted(i,s[1],1):3==s.length&&(a=this.helpers.getDateShifted(i,s[2],s[1])),r=a.getMonth()+"/"+a.getDate()+"/"+a.getFullYear(),e.parsedText=e.parsedText.replace(t[0],r),e.parsedDates.push({index:e.preConvertedString.indexOf(t[0]),match:s[0],formattedDate:r,date:{month:a.getMonth()+1,date:a.getDate(),year:a.getFullYear()}}),this.settings.onDateParsed&&"function"==typeof this.settings.onDateParsed&&this.settings.onDateParsed();for(;t=this.patterns.dates.relative.common.exec(e.parsedText);){if(r=void 0,e.isValidDate=!0,s=t.filter(this.helpers.isUndefined),this.patterns.dates.relative.common.lastIndex=t.index+1,n=this.parseRelPrefix(s),this.sets.weekday.indexOf(s[n.subjectIndex])>=0){var d=this.sets.weekday.indexOf(s[n.subjectIndex]);a=this.helpers.getNextWeekday(i,d,n)}else if(this.sets.month.indexOf(s[n.subjectIndex])>0){var h=this.sets.month.indexOf(s[n.subjectIndex])+1;a=this.helpers.getNextMonth(i,h,n)}else switch(s[n.subjectIndex].toLowerCase()){case"tomorrow":a=new Date(i.getFullYear(),i.getMonth(),i.getDate()+1,0,0,0);break;case"today":a=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);break;case"day":n.next?a=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0):n.last||n.number;break;case"week":n.next&&(a=new Date(i.getFullYear(),i.getMonth(),i.getDate()+7,0,0,0));break;case"month":n.next?(a=new Date(i.getFullYear(),i.getMonth()+1,i.getDate(),0,0,0),r=this.sets.month[i.getMonth()+1],e.parsedText=e.parsedText.replace(s[0],r),e=this.parseDates(e),this.patterns.dates.relative.common.lastIndex=0):n.self&&(a=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0),r=this.sets.month[i.getMonth()],e.parsedText=e.parsedText.replace(s[0],r),e=this.parseDates(e),this.patterns.dates.relative.common.lastIndex=0);break;case"year":n.next&&(a=new Date(i.getFullYear()+1,i.getMonth()+1,i.getDate(),0,0,0))}return r||(r=a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear(),e.parsedText=e.parsedText.replace(s[0],r),e.parsedDates.push({index:e.preConvertedString.indexOf(s[0]),match:s[0],formattedDate:r,dt:new Date(a),date:{month:a.getMonth()+1,date:a.getDate(),year:a.getFullYear()}}),this.settings.onDateParsed&&"function"==typeof this.settings.onDateParsed&&this.settings.onDateParsed()),e}return e},parseDateRanges:function(e){for(var t,s,a,r,n,i,d;r=this.patterns.dates.ranges.from.exec(e.parsedText);)1==e.parsedDates.length?(a=r.filter(this.helpers.isUndefined),n=parseInt(a[1])<=31&&parseInt(a[1])>=1?parseInt(a[1]):null,i=e.parsedDates[0].date.month,d=e.parsedDates[0].hasYear?e.parsedDates[0].date.year:null,t=i+"/"+n+(d?"/"+d:""),n&&i&&this.helpers.isValidDate(t)&&(s=i+"/"+n+(d?"/"+d:"")+" "+a[2]+" "+a[3],e.parsedText=e.parsedText.replace(a[0],s),e.parsedDates.push({index:e.preConvertedString.indexOf(r[0]),match:r[0],formattedDate:i+"/"+n+(d?"/"+d:""),hasYear:e.parsedDates[0].hasYear,date:{month:i,date:n,year:d}}),this.settings.onDateParsed&&"function"==typeof this.settings.onDateParsed&&this.settings.onDateParsed())):console.error("Cannot comeplete range. There is no dates detected or there more than 1 date in cache.");for(;r=this.patterns.dates.ranges.to.exec(e.parsedText);)1==e.parsedDates.length?(a=r.filter(this.helpers.isUndefined),n=parseInt(a[3])<=31&&parseInt(a[3])>=1?parseInt(a[3]):null,i=e.parsedDates[0].date.month,d=e.parsedDates[0].hasYear?e.parsedDates[0].date.year:null,t=i+"/"+n+(d?"/"+d:""),n&&i&&this.helpers.isValidDate(t)&&(s=a[1]+" "+a[2]+" "+e.parsedDates[0].date.month+"/"+a[3]+(e.parsedDates[0].hasYear?"/"+e.parsedDates[0].date.year:""),e.parsedText=e.parsedText.replace(a[0],s)),e.parsedDates.push({index:e.preConvertedString.indexOf(r[0]),match:r[0],formattedDate:i+"/"+n+(d?"/"+d:""),hasYear:e.parsedDates[0].hasYear,date:{month:i,date:n,year:d}}),this.settings.onDateParsed&&"function"==typeof this.settings.onDateParsed&&this.settings.onDateParsed()):console.error("Cannot comeplete range. There is no dates detected or there more than 1 date in cache.");return e},parse:function(e){if(!e)throw"Nothng to parse";var t=JSON.parse(JSON.stringify(this.eventTemplate));t.parsedText=e,t.parsedText=this.cleanup(t.parsedText),t.preConvertedString=t.parsedText,t.parsedTitle=t.parsedText,this.now=this.getNow();var s=this.now;if(t=this.parseDates(t),t=this.parseTimes(t),t=this.parseRecurrent(t),t=this.parseRelativeDates(t),t=this.parseDateRanges(t),t.parsedTitle=t.parsedText,t.parsedTitle=t.parsedTitle.replace(this.patterns.dates.ranges.formatted,""),t.parsedTitle=t.parsedTitle.replace(this.patterns.dates.formatted,""),t.parsedTitle=t.parsedTitle.replace(this.patterns.times.formatted,""),t.parsedTitle=t.parsedTitle.replace(/ +(?= )/g,"").trim(),t.parsedDates=t.parsedDates.sort(this.helpers.sortByParsedDates),!t.startDate)if(t.parsedDates.length)if(t.parsedTimes.length){if(t.allDay=!1,t.startDate=new Date(t.parsedDates[0].hasYear?t.parsedDates[0].date.year:s.getFullYear(),t.parsedDates[0].date.month-1,t.parsedDates[0].date.date,t.parsedTimes[0].time.hours,t.parsedTimes[0].time.minutes,0,0),2==t.parsedTimes.length){var a=parseFloat(t.parsedTimes[0].time.hours+"."+t.parsedTimes[0].time.minutes)>parseFloat(t.parsedTimes[1].time.hours+"."+t.parsedTimes[1].time.minutes)?1:0;1==t.parsedDates.length?t.endDate=new Date(t.parsedDates[0].hasYear?t.parsedDates[0].date.year:s.getFullYear(),t.parsedDates[0].date.month-1,t.parsedDates[0].date.date+a,t.parsedTimes[1].time.hours,t.parsedTimes[1].time.minutes,0,0):2==t.parsedDates.length&&(t.endDate=new Date(t.parsedDates[1].hasYear?t.parsedDates[1].date.year:t.parsedDates[0].hasYear?t.parsedDates[0].date.year:s.getFullYear(),t.parsedDates[1].date.month-1,t.parsedDates[1].date.date,t.parsedTimes[1].time.hours,t.parsedTimes[1].time.minutes,0,0))}}else t.startDate=new Date(t.parsedDates[0].hasYear?t.parsedDates[0].date.year:s.getFullYear(),t.parsedDates[0].date.month-1,t.parsedDates[0].date.date,0,0,0,0),2==t.parsedDates.length&&(t.endDate=new Date(t.parsedDates[1].hasYear?t.parsedDates[1].date.year:t.parsedDates[0].hasYear?t.parsedDates[0].date.year:s.getFullYear(),t.parsedDates[1].date.month-1,t.parsedDates[1].date.date,0,0,0,0)),t.allDay=!0;else t.parsedTimes.length?1==t.parsedTimes.length?(t.allDay=!1,t.startDate=new Date(s.getFullYear(),s.getMonth(),s.getDate(),t.parsedTimes[0].time.hours,t.parsedTimes[0].time.minutes,0,0)):2==t.parsedTimes.length&&(t.allDay=!1,t.startDate=new Date(s.getFullYear(),s.getMonth(),s.getDate(),t.parsedTimes[0].time.hours,t.parsedTimes[0].time.minutes,0,0),t.endDate=new Date(s.getFullYear(),s.getMonth(),s.getDate(),t.parsedTimes[1].time.hours,t.parsedTimes[1].time.minutes,0,0)):(t.allDay=!0,t.startDate=null,t.endDate=null,t.isValidDate=!1);return{title:t.parsedTitle.trim(),startDate:this.helpers.isDateObject(t.startDate)?new Date(t.startDate):void 0,endDate:this.helpers.isDateObject(t.endDate)?new Date(t.endDate):void 0,allDay:t.allDay,isRecurrent:t.isRecurrent}},helpers:{extend:function(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]},isUndefined:function(e){return void 0!=e},padNumberWithZeroes:function(e,t){t=t||2;for(var s=e+"";s.length<t;)s="0"+s;return s},getOrdinal:function(e){e=parseInt(e);var t=["th","st","nd","rd"],s=e%100;return e+(t[(s-20)%10]||t[s]||t[0])},strToNumber:function(e){var t=this.sets.number;if(this.patterns.numbers.normal.test(e)){var s,a;return s=e.split(/\s|-/g),a=(s.length=2)?t.prefix.indexOf(s[0])+1+""+(t.normal.indexOf(s[1])+1):t.normal.indexOf(s[0])>0?t.normal.indexOf(s[0])+1:10*(["ten","twenty","thirty"].indexOf(s[0])+1),parseInt(a)}return null},getDateShifted:function(e,t,s){if(s=s||1,"string"==typeof s&&isNaN(s))switch(s){case"couple":s=2;break;default:s=this.helpers.strToNumber(s)}else s=parseInt(s);switch(t){case"day":return new Date(e.getFullYear(),e.getMonth(),e.getDate()+s);case"week":return new Date(e.getFullYear(),e.getMonth(),e.getDate()+7*s);case"month":return new Date(e.getFullYear(),e.getMonth()+s,e.getDate());case"year":return new Date(e.getFullYear()+s,e.getMonth(),e.getDate())}},getNextMonth:function(e,t,s){e=e||this.now||new Date;var a,r=e.getMonth();return t="string"==typeof t&&isNaN(parseInt(t))?this.sets.month.indexOf(t.toLowerCase()):parseInt(t),a=r>=t?(new Date).setFullYear(e.getFullYear()+1,t,1):(new Date).setFullYear(e.getFullYear(),t,1),t==r&&s.self&&(a=(new Date).setFullYear(e.getFullYear(),t,1)),t==r&&s.next&&(a=(new Date).setFullYear(e.getFullYear()+1,t,1)),a},getNextWeekday:function(e,t,s){e=e||this.now||new Date;var a=e.getDay();t="string"==typeof t&&isNaN(parseInt(t))?this.sets.weekday.indexOf(t.toLowerCase()):parseInt(t);var r=t-a+(t>=a?0:7);return s.next&&a==t&&(r+=7),s.self&&a==t&&(r-=7),s.number&&(r=s.number>1?r+7*s.number:r),new Date(e.getFullYear(),e.getMonth(),e.getDate()+r)},isValidDate:function(e){var t=e.split("/"),s=t[2],a=t[0],r=t[1],n=[31,28,31,30,31,30,31,31,30,31,30,31];return(s%4||!(s%100))&&s%400||(n[1]=29),r<=n[--a]},isDateObject:function(e){return"[object Date]"===Object.prototype.toString.call(e)},isSameDay:function(e,t){return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()&&e.getFullYear()===t.getFullYear()},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},sortByParsedDates:function(e,t){var s=new Date(e.hasYear?e.date.year:(new Date).getFullYear(),e.date.month,e.date.date),a=new Date(t.hasYear?t.date.year:(new Date).getFullYear(),t.date.month,t.date.date);return a>s?-1:s>a?1:0}}},String.prototype.parseEvent=function(t){var s=new e(t);return s.parse(this)},window.EventParser=e}();