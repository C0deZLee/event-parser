!function(){function e(t){return this.defaults={sourceText:null,weekStart:"sunday"},this.event={},this.curagoEvent={},"string"==typeof t?this.parse(t):("object"==typeof t&&(this.settings=this.helpers.extend({},this.defaults,t)),window===this?new e(t):(this.eventTemplate={sourceText:"",parsedText:"",parsedTitle:"",parsedDates:[],parsedTimes:[],parsedNames:[],parsedLocations:[],parsedRecurrencies:[],title:"",startDate:null,endDate:null,until:null,separation:1,frequency:"once",count:0,recurrentAttr:[],isRecurrent:!1,isValidDate:!1,allDay:!0},this.curagoEventTemplate={title:"",starts_at:null,ends_at:null,until:null,frequency:"once",separation:1,count:null,recurrent_attributes:[{day:0,week:0,month:0}],cancelation_attributes:[{date:""}]},this.sets={weekday:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],month:["january","february","march","april","may","june","july","august","september","october","november","december"],number:{prefix:["twenty","thirty"],ordinal:["first","second","third","fourth","fifth","sixth","seventh","eighth","nineth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth"],normal:["one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"]},range:{splitter:["to","-","(?:un)?till?","through","thru","and","ends"],prefix:["from","start(?:ing)?","on","at"]},timeRelatives:["afternoon","night","evening","morning"]},this.patterns={recurrenceExpression:/((?:at|on)\s)?(((every|each)\s)?((((sunday|monday|tuesday|wednesday|thursday|friday|saturday)(?:s)?(?:\s)?(?:,|and|&)?\s?){2,})|((january|february|march|april|may|june|july|august|september|october|november|december)(?:\s)?(?:,|and|&)?\s?){2,}))|((every|each)\s(((?:((?:(twenty|thirty(?:-|\s))?(first|second|third|fourth|fifth|sixth|seventh|eighth|nineth|tenth|eleventh|twelfth|thirteenth|fourteenth|fifteenth|sixteenth|seventeenth|eighteenth|nineteenth))|(?:tenth|twentieth|thirtieth))|(\d+)(?:st|nd|rd|th))|next|last|other)?\s)?((sunday|monday|tuesday|wednesday|thursday|friday|saturday)(?:s)?|(january|february|march|april|may|june|july|august|september|october|november|december)|(weekday|weekend|week|month|day|year)))|(dai|week|month|year)ly|weekends|weekdays/gi,recurrenceExcepts:/(?:except)(.+?)(?=on|at|with|from|to|(un)?till?)/gi,numbers:{numerical:/\b(?:(\d+)(st|nd|rd|th)\b)/gi,ordinal:new RegExp("(?:("+this.sets.number.prefix.join("|")+"(?:-|\\s))?("+this.sets.number.ordinal.join("|")+"))|(?:tenth|twentieth|thirtieth)","gi"),normal:new RegExp("((?:(?:(?:"+this.sets.number.prefix.join("|")+")(?:-|\\s))?("+this.sets.number.normal.join("|")+"))|(?:ten|"+this.sets.number.prefix.join("|")+"))","gi")},dates:{formatted:/(?:(?:on|at)\s)?(\d{1,2})\/(\d{1,2})(?:\/(\d{4}|\d{2}))?/gi,mdyStrings:/(?:(january|february|march|april|may|june|july|august|september|october|november|december)(?:(?:(?:\s?,)?\s?of)?\s?(\d{1,2}(?:\s)?(?:|th|st|nd|rd)?)\b)(?:(?:\s?,)?(?:\s?of\s?)?(?:\s)?(20\d{2}|\d{2}[6-9]\d+))?)/gi,dmyStrings:/(?:(\d{1,2}(?:\s)?(?:|th|st|nd|rd)?)\b(?:\sof\s)?\s?(january|february|march|april|may|june|july|august|september|october|november|december)(?:(?:\s?,)?(?:\s?of\s?)?(20\d{2}|\d{2}[6-9]\d+))?)/gi,relative:{common:/(?:(?:on|at|to)\s)?(?:(next|this|last|after|other|\d(?:st|nd|rd|th)?)\s)?(today|tomorrow|month|week|year|sunday|monday|tuesday|wednesday|thursday|friday|saturday)/gi,dayAfter:/(\bday\safter\stomorrow\b)/gi,"in":/(?:in\b\s(?:a\s)?(couple|(?:\d+)|(?:\b(?:twenty|thirty(?:-|\s))?\b(?:one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen))|(?:twenty|thirty))?(?:\s)?(?:of\s)?(day|week|month|year)(?:s)?)/gi},ranges:{from:new RegExp("((?!\\d{1,2}\\/)\\d{1,2})(?:(?:\\s)?("+this.sets.range.splitter.join("|")+")(?:\\s)?)(\\d{1,2}\\/\\d{1,2}(?:\\/\\d{2,4})?)","gi"),to:new RegExp("(\\d{1,2}\\/\\d{1,2}(?:\\/\\d{2,4})?)(?:(?:\\s)?("+this.sets.range.splitter.join("|")+")(?:\\s)?)((?!\\d{1,2}\\/)\\d{1,2})","gi"),between:/\s/gi}},times:{formatted:/((?:(?:at|on)\s)?(?:\d{1,2})(?:\:)(?:\d{2}))/gi,singleInstances:/(?:(?:at|on)?(\d{1,2})(?:(?:\:)(\d{2}))(?:(?:\s)?(am|pm))?|(\d{1,2})(?:\s)?(am|pm))/gi,fullRanges:new RegExp("((?:"+this.sets.range.prefix.join("|")+"\\s)?(?:\\d{1,2})(?::)(\\d{2}))\\s?(?:"+this.sets.range.splitter.join("|")+")\\s?((\\d{1,2})(?::)(\\d{2}))","gi"),partialX2Time:new RegExp("((?:"+this.sets.range.prefix.join("|")+"\\s)?(?:\\d{1,2})(?::)(\\d{2}))\\s?(?:"+this.sets.range.splitter.join("|")+")\\s?((\\d{1,2})(?:\\:)(\\d{2}))","gi"),partialTime2X:new RegExp("((?:"+this.sets.range.prefix.join("|")+"\\s)?(?:\\d{1,2})(?::)(\\d{2}))\\s?(?:"+this.sets.range.splitter.join("|")+")\\s?((\\d{1,2})(?:\\:)(\\d{2}))","gi")},nicers:[[/(\d{4})(?:-|.)(\d{2})(?:-|.)(\d{2})/gi,"$2/$3/$1"],[/(w(\.|\/))/i,"with"],[/[^0-9a-z]\s?(@)\s?/i," at "],[/(\btom(?:orrow)?\b)/i,"tomorrow"],[/(?:\b)(noon)(?:\b)/i,"12:00"],[/\b(midnight)\b/i,"24:00"],[/(\bmon(?:day)?\b)/i,"monday"],[/(\btue(?:s(?:day)?)?\b)/i,"tuesday"],[/(\bwed(?:nes(?:day)?)?\b)/i,"wednesday"],[/(\bthu(?:rs(?:day)?)?\b)/i,"thursday"],[/(\bfri(?:day)?\b)/i,"friday"],[/(\bsat(?:ur(?:day)?)?\b)/i,"saturday"],[/(\bsun(?:day)?\b)/i,"sunday"],[/(\bjan(?:uary)?\b)/i,"january"],[/(\bfeb(?:ruary)?\b)/i,"february"],[/(\bmar(?:ch)?\b)/i,"march"],[/(\bapr(?:il)?\b)/i,"april"],[/(\bmay\b)/i,"may"],[/(\bjun(?:e)?\b)/i,"june"],[/(\bjul(?:y)?\b)/i,"july"],[/(\baug(?:ust)?\b)/i,"august"],[/(\bsep(?:t(?:ember)?)?\b)/i,"september"],[/(\boct(?:ober)?\b)/i,"october"],[/(\bdec(?:ember)?\b)/i,"december"]],holidays:[[/(\bthanksgiving\b)/gi,"every 4th thuesday of november"],[/\b(christmas|xmas|x-mas)\b/gi,"12/25"],[/(\bnew\s?year(:?\'s)?(\seve)\b)/gi,"12/31 at 23:00"],[/(\bnew\s?year(:?\'s)\b)/gi,"1/1"],[/(\bapril\sfools\b)/gi,"4/1"],[/(\bhalloween\b)/gi,"10/30"]]},this.now=void 0,this instanceof e?this:new e(this.settings)))}e.prototype={getNow:function(){return this.now?new Date(this.now.getTime()):new Date},cleanup:function(e){for(var t,a,s,r=0;r<this.patterns.nicers.length;r++)e=e.replace(this.patterns.nicers[r][0],this.patterns.nicers[r][1]);for(var r=0;r<this.patterns.holidays.length;r++)e=e.replace(this.patterns.holidays[r][0],this.patterns.holidays[r][1]);for(this.patterns.numbers.numerical.lastIndex=0;s=this.patterns.numbers.numerical.exec(e);)a=s.filter(this.helpers.isUndefined),this.patterns.numbers.numerical.lastIndex=s.index+1,e=e.replace(a[0],this.helpers.getOrdinal(a[1]));for(this.patterns.numbers.normal.lastIndex=0;s=this.patterns.numbers.normal.exec(e);)a=s.filter(this.helpers.isUndefined),this.patterns.numbers.normal.lastIndex=s.index+1;for(this.patterns.numbers.ordinal.lastIndex=0;s=this.patterns.numbers.ordinal.exec(e);){if(a=s.filter(this.helpers.isUndefined),this.patterns.numbers.ordinal.lastIndex=s.index+1,t="",2==a.length)if(a[1].match(/tenth|twentieth|thirtieth/i))switch(a[1]){case"tenth":t="10th";break;case"twentieth":t="20th";break;case"thirtieth":t="30th"}else t=this.helpers.getOrdinal(this.sets.number.ordinal.indexOf(a[1].toLowerCase())+1);else 3==a.length&&(t=this.sets.number.prefix.indexOf(a[1].toLowerCase())+2+this.helpers.getOrdinal(this.sets.number.ordinal.indexOf(a[2].toLowerCase())+1));""!=t&&(e=e.replace(a[0],t))}return e},parseRecurrent:function(e){var t,a;for(e.isRecurrent=!1,e.recurrenceText="";a=this.patterns.recurrenceExpression.exec(e.parsedText);)t=a.filter(this.helpers.isUndefined),this.patterns.recurrenceExpression.lastIndex=a.index+1,e.isRecurrent=!0,e.parsedText=e.parsedText.replace(t[0],""),e.parsedRecurrencies.push({index:a.index,match:t[0]});if(e.isRecurrent)for(;t=this.patterns.recurrenceExcepts.exec(e.parsedText);)e.recurrenceExceptionsText=t[0],e.parsedText=e.parsedText.replace(e.recurrenceExceptionsText,"");else;return e},parseRelPrefix:function(e){var t,a,s=!1,r=!1,n=!1,i=!1;if(e.length>=3){switch(e[1]){case"last":s=!0;break;case"next":r=!0;break;case"this":n=!0;break;default:(a=e[1].match(this.patterns.numbers.numerical))&&(t=2,i=parseInt(a[0]))}t=2}else t=1;return{last:s,next:r,self:n,number:i,subjectIndex:t}},parseRelSuffix:function(e){},parseDates:function(e){var t,a,s,r=this.getNow();for(this.patterns.dates.formatted.lastIndex=0;a=this.patterns.dates.formatted.exec(e.parsedText);)e.isValidDate=!0,t=a.filter(this.helpers.isUndefined),s=t[0],e.parsedDates.push({index:a.index,match:s,formattedDate:s,hasYear:4==t.length,date:{month:parseInt(t[1]),date:parseInt(t[2]),year:4==t.length?parseInt(t[3]):void 0}});for(this.patterns.dates.mdyStrings.lastIndex=0;a=this.patterns.dates.mdyStrings.exec(e.parsedText);)e.isValidDate=!0,t=a.filter(this.helpers.isUndefined),this.patterns.dates.mdyStrings.lastIndex=a.index+1,s=this.sets.month.indexOf(t[1])+1+"/"+parseInt(t[2])+(4==t.length?"/"+t[3]:""),e.parsedText=e.parsedText.replace(t[0],s),e.parsedDates.push({index:a.index,match:t[0],formattedDate:s,hasYear:4==t.length,dt:4==t.length?new Date(t[3],this.sets.month.indexOf(t[1]),t[2]):new Date(r.getFullYear(),this.sets.month.indexOf(t[1]),t[2]),date:{month:this.sets.month.indexOf(t[1])+1,date:parseInt(t[2]),year:4==t.length?t[3]:void 0}});for(this.patterns.dates.dmyStrings.lastIndex=0;a=this.patterns.dates.dmyStrings.exec(e.parsedText);)e.isValidDate=!0,t=a.filter(this.helpers.isUndefined),this.patterns.dates.dmyStrings.lastIndex=a.index+1,s=this.sets.month.indexOf(t[2])+1+"/"+parseInt(t[1])+(4==t.length?"/"+t[3]:""),e.parsedText=e.parsedText.replace(t[0],s),e.parsedDates.push({index:e.preConvertedString.indexOf(t[0]),match:t[0],formattedDate:s,hasYear:4==t.length,dt:4==t.length?new Date(t[3],this.sets.month.indexOf(t[2]),t[1]):new Date(r.getFullYear(),this.sets.month.indexOf(t[2]),t[1]),date:{month:this.sets.month.indexOf(t[2])+1,date:parseInt(t[1]),year:4==t.length?t[3]:void 0}});return e.parsedDates.sort(function(e,t){return e.dt<t.dt?-1:e.dt>t.dt?1:0}),e},parseTimes:function(e){for(var t,a,s,r,n;n=this.patterns.times.singleInstances.exec(e.parsedText);)e.isValidDate=!0,r=n.filter(this.helpers.isUndefined),r.length>=3&&("am"===r[r.length-1]||"pm"===r[r.length-1]?(s=r[r.length-1],t="am"==s&&12==parseInt(r[1])?0:"pm"==s&&parseInt(r[1])<12?parseInt(r[1])+12:parseInt(r[1]),a=3==r.length?0:parseInt(r[2])):(t=parseInt(r[1]),a=parseInt(r[2])),formattedString=this.helpers.padNumberWithZeroes(t,2)+":"+this.helpers.padNumberWithZeroes(a,2),e.parsedText=e.parsedText.replace(r[0],formattedString),e.parsedTimes.push({index:n.index,hasMeridian:s||!1,match:r[0],formattedTime:formattedString,time:{hours:t,minutes:a}}));return e},parseRelativeDates:function(e){for(var t,a,s,r,n,i=this.getNow(),s=i;t=this.patterns.dates.relative.common.exec(e.parsedText);){if(r=void 0,e.isValidDate=!0,a=t.filter(this.helpers.isUndefined),this.patterns.dates.relative.common.lastIndex=t.index+1,n=this.parseRelPrefix(a),this.sets.weekday.indexOf(a[n.subjectIndex])>=0){var d=this.sets.weekday.indexOf(a[n.subjectIndex]);s=this.helpers.getNextWeekday(i,d,n)}else if(this.sets.month.indexOf(a[n.subjectIndex])>0){var h=this.sets.month.indexOf(a[n.subjectIndex])+1;s=this.helpers.getNextMonth(i,h,n)}else switch(a[n.subjectIndex].toLowerCase()){case"tomorrow":s=new Date(i.getFullYear(),i.getMonth(),i.getDate()+1,0,0,0);break;case"today":s=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);break;case"day":n.next?s=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0):n.last||n.number;break;case"week":n.next&&(s=new Date(i.getFullYear(),i.getMonth(),i.getDate()+7,0,0,0));break;case"month":n.next?(s=new Date(i.getFullYear(),i.getMonth()+1,i.getDate(),0,0,0),r=this.sets.month[i.getMonth()+1],e.parsedText=e.parsedText.replace(a[0],r),e=this.parseDates(e),this.patterns.dates.relative.common.lastIndex=0):n.self&&(s=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0),r=this.sets.month[i.getMonth()],e.parsedText=e.parsedText.replace(a[0],r),e=this.parseDates(e),this.patterns.dates.relative.common.lastIndex=0);break;case"year":n.next&&(s=new Date(i.getFullYear()+1,i.getMonth()+1,i.getDate(),0,0,0))}return r||(r=s.getMonth()+1+"/"+s.getDate()+"/"+s.getFullYear(),e.parsedText=e.parsedText.replace(a[0],r),e.parsedDates.push({index:e.preConvertedString.indexOf(a[0]),match:a[0],formattedDate:r,dt:new Date(s),date:{month:s.getMonth(),date:s.getDate(),year:s.getFullYear()}})),e}for((t=e.parsedText.match(this.patterns.dates.relative.dayAfter))&&(s=new Date(i.getFullYear(),i.getMonth(),i.getDate()+2),r=s.getMonth()+"/"+s.getDate()+"/"+s.getFullYear(),e.parsedText=e.parsedText.replace(t[0],r),e.parsedDates.push({index:e.preConvertedString.indexOf(t[0]),match:a[0],formattedDate:r,date:{month:s.getMonth(),date:s.getDate(),year:s.getFullYear()}}));t=this.patterns.dates.relative["in"].exec(e.parsedText);)a=t.filter(this.helpers.isUndefined),2==a.length?s=this.helpers.getDateShifted(i,a[1],1):3==a.length&&(s=this.helpers.getDateShifted(i,a[2],a[1])),r=s.getMonth()+"/"+s.getDate()+"/"+s.getFullYear(),e.parsedText=e.parsedText.replace(t[0],r),e.parsedDates.push({index:e.preConvertedString.indexOf(t[0]),match:a[0],formattedDate:r,date:{month:s.getMonth(),date:s.getDate(),year:s.getFullYear()}});return e},parseDateRanges:function(e){for(;matches=this.patterns.dates.ranges.from.exec(e.parsedText);)match=matches.filter(this.helpers.isUndefined),1==e.parsedDates.length?(formattedString=e.parsedDates[0].date.month+"/"+match[1]+(e.parsedDates[0].hasYear?"/"+e.parsedDates[0].date.year:"")+" "+match[2]+" "+match[3],e.parsedText=e.parsedText.replace(match[0],formattedString)):console.warn("Cannot comeplete range. There is no dates detected or there more than 1 date in cache."),e.parsedDates.push({index:e.preConvertedString.indexOf(matches[0]),match:matches[0],formattedDate:e.parsedDates[0].date.month+"/"+match[1]+(e.parsedDates[0].hasYear?"/"+e.parsedDates[0].date.year:""),date:{month:e.parsedDates[0].date.month,date:parseInt(match[1]),year:e.parsedDates[0].date.year}});for(;matches=this.patterns.dates.ranges.to.exec(e.parsedText);)match=matches.filter(this.helpers.isUndefined),1==e.parsedDates.length?(formattedString=match[1]+" "+match[2]+" "+e.parsedDates[0].date.month+"/"+match[3]+(e.parsedDates[0].hasYear?"/"+e.parsedDates[0].date.year:""),e.parsedText=e.parsedText.replace(match[0],formattedString)):console.warn("Cannot comeplete range. There is no dates detected or there more than 1 date in cache."),e.parsedDates.push({index:e.preConvertedString.indexOf(matches[0]),match:matches[0],formattedDate:e.parsedDates[0].date.month+"/"+match[3]+(e.parsedDates[0].hasYear?"/"+e.parsedDates[0].date.year:""),date:{month:e.parsedDates[0].date.month,date:parseInt(match[3]),year:e.parsedDates[0].date.year}});return e},parse:function(e){if(!e)throw"Nothng to parse";var t=JSON.parse(JSON.stringify(this.eventTemplate));t.parsedText=e,t.parsedText=this.cleanup(t.parsedText),t.preConvertedString=t.parsedText,t.parsedTitle=t.parsedText,this.now=this.getNow();var a=this.now;return t=this.parseDates(t),t=this.parseTimes(t),t=this.parseRecurrent(t),t=this.parseRelativeDates(t),t=this.parseDateRanges(t),t.parsedTitle=t.parsedText,t.parsedTitle=t.parsedTitle.replace(this.patterns.dates.formatted,""),t.parsedTitle=t.parsedTitle.replace(this.patterns.times.formatted,""),t.parsedTitle=t.parsedTitle.replace(/ +(?= )/g,"").trim(),t.startDate||(t.parsedDates.length?t.parsedTimes.length?(t.startDate=new Date(t.parsedDates[0].hasYear?t.parsedDates[0].date.year:a.getFullYear(),t.parsedDates[0].date.month,t.parsedDates[0].date.date,t.parsedTimes[0].time.hours,t.parsedTimes[0].time.minutes,0,0),2==t.parsedTimes.length&&(1==t.parsedDates.length?t.endDate=new Date(t.parsedDates[0].hasYear?t.parsedDates[0].date.year:a.getFullYear(),t.parsedDates[0].date.month,t.parsedDates[0].date.date,t.parsedTimes[1].time.hours,t.parsedTimes[1].time.minutes,0,0):2==t.parsedDates.length&&(t.endDate=new Date(t.parsedDates[1].hasYear?t.parsedDates[1].date.year:a.getFullYear(),t.parsedDates[1].date.month,t.parsedDates[1].date.date,t.parsedTimes[1].time.hours,t.parsedTimes[1].time.minutes,0,0)))):(t.startDate=new Date(t.parsedDates[0].hasYear?t.parsedDates[0].date.year:a.getFullYear(),t.parsedDates[0].date.month,t.parsedDates[0].date.date,0,0,0,0),t.allDay=!0):t.parsedTimes.length?1==t.parsedTimes.length?t.startDate=new Date(a.getFullYear(),a.getMonth(),a.getDate(),t.parsedTimes[0].time.hours,t.parsedTimes[0].time.minutes,0,0):2==t.parsedTimes.length&&(t.startDate=new Date(a.getFullYear(),a.getMonth(),a.getDate(),t.parsedTimes[0].time.hours,t.parsedTimes[0].time.minutes,0,0),t.endDate=new Date(a.getFullYear(),a.getMonth(),a.getDate(),t.parsedTimes[1].time.hours,t.parsedTimes[1].time.minutes,0,0)):(t.allDay=!0,t.startDate=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),0,0),t.isValidDate=!1)),{title:t.parsedTitle.trim(),startDate:t.startDate instanceof Date?new Date(t.startDate):"",endDate:t.endDate instanceof Date?new Date(t.endDate):"",allDay:t.allDay,isRecurrent:t.isRecurrent}},helpers:{extend:function(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]},isUndefined:function(e){return void 0!=e},padNumberWithZeroes:function(e,t){t=t||2;for(var a=e+"";a.length<t;)a="0"+a;return a},getOrdinal:function(e){e=parseInt(e);var t=["th","st","nd","rd"],a=e%100;return e+(t[(a-20)%10]||t[a]||t[0])},strToNumber:function(e){var t=this.sets.number;if(this.patterns.numbers.normal.test(e)){var a,s;return a=e.split(/\s|-/g),s=(a.length=2)?t.prefix.indexOf(a[0])+1+""+(t.normal.indexOf(a[1])+1):t.normal.indexOf(a[0])>0?t.normal.indexOf(a[0])+1:10*(["ten","twenty","thirty"].indexOf(a[0])+1),parseInt(s)}return null},getDateShifted:function(e,t,a){if(a=a||1,"string"==typeof a&&isNaN(a))switch(a){case"couple":a=2;break;default:a=this.helpers.strToNumber(a)}else a=parseInt(a);switch(t){case"day":return new Date(e.getFullYear(),e.getMonth(),e.getDate()+a);case"week":return new Date(e.getFullYear(),e.getMonth(),e.getDate()+7*a);case"month":return new Date(e.getFullYear(),e.getMonth()+a,e.getDate());case"year":return new Date(e.getFullYear()+a,e.getMonth(),e.getDate())}},getNextMonth:function(e,t,a){e=e||this.now||new Date;var s,r=e.getMonth();return t="string"==typeof t&&isNaN(parseInt(t))?this.sets.month.indexOf(t.toLowerCase()):parseInt(t),s=r>=t?(new Date).setFullYear(e.getFullYear()+1,t,1):(new Date).setFullYear(e.getFullYear(),t,1),t==r&&a.self&&(s=(new Date).setFullYear(e.getFullYear(),t,1)),t==r&&a.next&&(s=(new Date).setFullYear(e.getFullYear()+1,t,1)),s},getNextWeekday:function(e,t,a){e=e||this.now||new Date;var s=e.getDay();t="string"==typeof t&&isNaN(parseInt(t))?this.sets.weekday.indexOf(t.toLowerCase()):parseInt(t);var r=t-s+(t>=s?0:7);return a.next&&s==t&&(r+=7),a.self&&s==t&&(r-=7),a.number&&(r=a.number>1?r+7*a.number:r),new Date(e.getFullYear(),e.getMonth(),e.getDate()+r)},isSameDay:function(e,t){return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()&&e.getFullYear()===t.getFullYear()}}},window.EventParser=e,String.prototype.parseEvent=function(t){t=t||void 0;var a=new e(t);return a.parse(this)}}();